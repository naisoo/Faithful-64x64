{
  "namespace": "crafting",

  //---------------------------------------------------------------------------
  // Common
  //---------------------------------------------------------------------------

  "inventory_x_gamepad_helper@common.gamepad_helper_x": {
    "bindings": [
      {
        "binding_name": "#gamepad_helper_x_visible",
        "binding_name_override": "#visible",
        "binding_condition": "always"
      }
    ]
  },

  "creative_gamepad_helpers": {
    "type": "panel",
    "anchor_from": "top_middle",
    "anchor_to": "bottom_middle",
    "size": [ "100%", 16 ],
    "$left_bumper_anchor_from|default": "top_left",
    "$left_bumper_anchor_to|default": "top_right",
    "$right_bumper_anchor_from|default": "top_right",
    "$right_bumper_anchor_to|default": "top_left",
    "controls": [
      {
        "gamepad_helper_left_bumper@common.gamepad_helper_left_bumper": {
          "anchor_from": "$left_bumper_anchor_from",
          "anchor_to": "$left_bumper_anchor_to",
          "$hide_description": true
        }
      },
      {
        "gamepad_helper_right_bumper@common.gamepad_helper_right_bumper": {
          "anchor_from": "$right_bumper_anchor_from",
          "anchor_to": "$right_bumper_anchor_to",
          "$hide_description": true
        }
      }
    ]
  },

  "container_gamepad_helpers_second_row": {
    "type": "stack_panel",
    "size": [ "100%c", "100%c" ],
    "orientation": "horizontal",
    "controls": [
      {
        "buffer_panel_left": {
          "type": "panel",
          "size": [ 10, 0 ]
        }
      },
      {
        "thumbstick_visibility": {
          "type": "panel",
          "size": ["100%c", "100%c"],
          "bindings": [
            {
              "binding_type": "global",
              "binding_name": "#recipe_book_toggle",
              "binding_name_override": "#visible"
            }
          ],

          "controls": [
            {
              "gamepad_helper_thumbstick_left@common.gamepad_helper_thumbstick_left": {
                "$gamepad_helper_size": [ "100%c", 20 ]
              }
            }
          ]
        }
      }
    ]
  },

  "drop_item_panel": {
    "type": "input_panel",
    "button_mappings": [
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "button.cursor_drop_all",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_secondary_select",
        "to_button_id": "button.cursor_drop_one",
        "mapping_type": "pressed"
      }
    ]
  },

  //---------------------------------------------------------------------------
  // Creative Grid Items
  //---------------------------------------------------------------------------

  "inventory_container_slot_button@common.container_slot_button_prototype": {
    "$button_take_half_place_one|default": "button.container_take_half_place_one",
    "$button_auto_place|default": "button.crafting_container_auto_place",
    "variables": [
      {
        "requires": "($touch and $pocket_screen)",
        "$button_take_all_place_all|default": "button.container_touch_select",
        "$coalesce_button|default": "button.touch_coalesce_stack",
        "$item_painting_button|default": "button.touch_painting"
      },
      {
        "requires": "(not ($touch and $pocket_screen))",
        "$button_take_all_place_all|default": "button.container_take_all_place_all",
        "$coalesce_button|default": "button.coalesce_stack",
        "$item_painting_button|default": "button.shape_drawing"
      }
    ],
    "button_mappings": [
      {
        "from_button_id": "button.menu_cancel",
        "to_button_id": "button.try_menu_exit",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "$button_take_all_place_all",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_ok",
        "to_button_id": "$button_take_all_place_all",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_secondary_select",
        "to_button_id": "$button_take_half_place_one",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.controller_select",
        "to_button_id": "$button_take_half_place_one",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_auto_place",
        "to_button_id": "$button_auto_place",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.controller_secondary_select",
        "to_button_id": "$button_auto_place",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_inventory_drop",
        "to_button_id": "button.drop_one",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_inventory_drop_all",
        "to_button_id": "button.drop_all",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "$coalesce_button",
        "mapping_type": "double_pressed"
      },
      {
        "from_button_id": "button.menu_ok",
        "to_button_id": "$coalesce_button",
        "mapping_type": "double_pressed"
      },
      {
        "to_button_id": "$item_painting_button",
        "mapping_type": "pressed"
      },
      {
        "to_button_id": "button.container_slot_hovered",
        "mapping_type": "pressed"
      }
    ]
  },

  "hotbar_container_slot_button@crafting.inventory_container_slot_button": {
    "$button_take_half_place_one": "button.hotbar_take_half_place_one"
  },

  "no_coalesce_container_slot_button@crafting.inventory_container_slot_button": {
    "button_mappings": [
      {
        "from_button_id": "button.menu_cancel",
        "to_button_id": "button.try_menu_exit",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "$button_take_all_place_all",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_ok",
        "to_button_id": "$button_take_all_place_all",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_secondary_select",
        "to_button_id": "$button_take_half_place_one",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.controller_select",
        "to_button_id": "$button_take_half_place_one",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_auto_place",
        "to_button_id": "$button_auto_place",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.controller_secondary_select",
        "to_button_id": "$button_auto_place",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_inventory_drop",
        "to_button_id": "button.drop_one",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_inventory_drop_all",
        "to_button_id": "button.drop_all",
        "mapping_type": "pressed"
      },
      {
        "to_button_id": "button.shape_drawing",
        "mapping_type": "pressed"
      },
      {
        "to_button_id": "button.container_slot_hovered",
        "mapping_type": "pressed"
      }
    ]
  },

  "creative_no_coalesce_container_slot_button@crafting.no_coalesce_container_slot_button": {
    "$button_take_all_place_all": "button.recipe_select",
    "$button_take_half_place_one": "button.recipe_secondary",
    "$button_auto_place": "button.recipe_tertiary"
  },

  "output_no_coalesce_container_slot_button@crafting.no_coalesce_container_slot_button": {
    "$button_take_all_place_all": "button.crafting_output_primary",
    "$button_take_half_place_one": "button.crafting_output_secondary",
    "$button_auto_place": "button.crafting_output_tertiary"
  },

  //---------------------------------------------------------------------------
  // Creative Tabs
  //---------------------------------------------------------------------------

  "tab_image": {
    "type": "image",
    "layer": 2,
    "size": [ 24, 25 ]
  },

  "item_renderer": {
    "type": "custom",
    "renderer": "inventory_item_renderer",
    "size": [ 16, 16 ]
  },

  "icon_image": {
    "type": "image",
    "layer": 3,
    "size": [ 17, 17 ]
  },

  "tab_front@crafting.tab_image": {
    "texture": "textures/ui/TabTopFront"
  },

  "tab_back@crafting.tab_image": {
    "texture": "textures/ui/TabTopBack"
  },

  "equipment_icon@crafting.icon_image": {
    "texture": "textures/ui/icon_recipe_equipment"
  },

  "construction_icon@crafting.icon_image": {
    "texture": "textures/ui/icon_recipe_construction"
  },

  "nature_icon@crafting.icon_image": {
    "texture": "textures/ui/icon_recipe_nature"
  },

  "search_icon@crafting.icon_image": {
    "texture": "textures/ui/magnifyingGlass"
  },

  "miscellaneous_icon@crafting.icon_image": {
    "texture": "textures/ui/icon_recipe_item"
  },

  "empty_tab_panel": {
    "type": "panel",
    "size": [ 24, 25 ],
    "controls": [
      {
        "img@$tab_icon": {}
      }
    ]
  },

  //---------------------------------------------------------------------------
  // Tab Navigation
  //---------------------------------------------------------------------------

  "top_tab@common_tabs.tab_top": {
    "$toggle_focus_enabled": false,
    "$radio_toggle_group": true,
    "$toggle_name": "navigation_tab",
    "$toggle_group_default_selected": "$construction_index", //Construction tab
    "anchor_from": "top_middle",
    "anchor_to": "bottom_middle"
  },

  "search_tab@crafting.top_tab": {
    "$is_right_most_tab": true,
    "$tab_view_binding_name": "search_tab_toggle",
    "$tab_icon": "crafting.search_icon",
    "$toggle_group_forced_index": "$search_index",
    "$tab_content": "crafting.empty_tab_panel"
  },

  "construction_tab@crafting.top_tab": {
    "$is_left_most_tab": true,
    "$tab_view_binding_name": "construction_tab_toggle",
    "$tab_icon": "crafting.construction_icon",
    "$toggle_group_forced_index": "$construction_index",
    "$tab_content": "crafting.empty_tab_panel"
  },

  "equipment_tab@crafting.top_tab": {
    "$tab_view_binding_name": "equipment_tab_toggle",
    "$tab_icon": "crafting.equipment_icon",
    "$toggle_group_forced_index": "$equipment_index",
    "$tab_content": "crafting.empty_tab_panel"
  },

  "nature_tab@crafting.top_tab": {
    "$tab_view_binding_name": "nature_tab_toggle",
    "$tab_icon": "crafting.nature_icon",
    "$toggle_group_forced_index": "$nature_index",
    "$tab_content": "crafting.empty_tab_panel"
  },

  "items_tab@crafting.top_tab": {
    "$tab_view_binding_name": "items_tab_toggle",
    "$tab_icon": "crafting.miscellaneous_icon",
    "$toggle_group_forced_index": "$items_index",
    "$tab_content": "crafting.empty_tab_panel"
  },

  "tab_navigation_panel_layout": {
    "type": "stack_panel",
    "orientation": "horizontal",
    "anchor_to": "bottom_middle",
    "anchor_from": "top_middle",
    "size": [ "100%", 27 ],
    "controls": [
      {
        "navigation_tabs": {
          "type": "panel",
          "size": [ "fill", "100%" ],
          "controls": [
            {
              "content": {
                "type": "stack_panel",
                "orientation": "horizontal",
                "size": [ "100%", "100%" ],
                "offset": [ 1, 12 ],
                "anchor_to": "top_left",
                "anchor_from": "top_left",
                "controls": [
                  {
                    "construction_tab@crafting.construction_tab": {
                      "size": [ 25, "100%" ]
                    }
                  },
                  {
                    "equipment_tab@crafting.equipment_tab": {
                      "size": [ 25, "100%" ]
                    }
                  },
                  {
                    "items_tab@crafting.items_tab": {
                      "size": [ 25, "100%" ]
                    }
                  },
                  {
                    "nature_tab@crafting.nature_tab": {
                      "size": [ 25, "100%" ]
                    }
                  },
                  {
                    "fill_panel_0": {
                      "type": "panel",
                      "size": [ "5%", "100%" ]
                    }
                  },
                  {
                    "search_tab@crafting.search_tab": {
                      "size": [ 25, "100%" ]
                    }
                  }
                ]
              }
            }
          ]
        }
      }
    ]
  },

  "tab_content": {
    "type": "panel",
    "visible": false,
    "layer": 1,
    "controls": [
      {
        "bg@common.common_panel": {
          "$dialog_background": "common.dialog_background_opaque",
          "$show_close_button": false
        }
      },
      {
        "tab_content_panel": {
          "type": "stack_panel",
          "size": [ "100% - 12px", "100% - 12px" ],
          "orientation": "vertical",

          "controls": [
            {
              "vertical_padding_1": {
                "type": "panel",
                "size": [ 0, 2 ]
              }
            },
            {
              "creative_label_and_filter_toggle_holder": {
                "type": "stack_panel",
                "size": [ "100%", 10 ],
                "orientation": "horizontal",

                "controls": [
                  {
                    "padding_1": {
                      "type": "panel",
                      "size": [ 3, 0 ]
                    }
                  },
                  {
                    "creative_label@crafting.creative_label": {
                      "size": [ "fill", "100%" ]
                    }
                  },
                  {
                    "padding_2": {
                      "type": "panel",
                      "size": [ 2, 0 ]
                    }
                  },
                  {
                    "filter_toggle_holder": {
                      "type": "panel",
                      "size": [ "100%c", "100%" ],
                      "controls": [
                        {
                          "filter_toggle@crafting.filter_toggle": {
                            "offset": [ 1, 0 ],
                            "anchor_from": "right_middle",
                            "anchor_to": "right_middle",

                            "$focus_id": "craftable_toggle",
                            "$focus_override_left": "recipe_search_bar",
                            "$focus_override_up": "FOCUS_OVERRIDE_STOP"
                          }
                        }
                      ]
                    }
                  }
                ]
              }
            },
            {
              "vertical_padding_2": {
                "type": "panel",
                "size": [ 0, 4 ]
              }
            },
            {
              "scroll_pane@$scrolling_pane_control": {
                "size": [ "100%", "fill" ]
              }
            }
          ]
        }
      }
    ],
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$navigation_tab_name",
        "source_property_name": "#toggle_state",
        "target_property_name": "#visible"
      }
    ]
  },

  "tab_content_search_bar": {
    "type": "panel",
    "layer": 1,
    "controls": [
      {
        "bg@common.common_panel": {
          "$dialog_background": "dialog_background_opaque",
          "$show_close_button": false
        }
      },
      {
        "tab_content_search_bar_panel": {
          "type": "stack_panel",
          "size": [ "100% - 12px", "100% - 12px" ],
          "orientation": "vertical",

          "controls": [
            {
              "vertical_padding_1": {
                "type": "panel",
                "size": [ 0, 2 ]
              }
            },
            {
              "creative_label_holder": {
                "type": "panel",
                "size": [ "100%", "100%c" ],
                "controls": [
                  {
                    "creative_label@crafting.creative_label": {
                      "text": "#search_tab_label_text",
                      "bindings": [
                        {
                          "binding_name": "#search_tab_label_text"
                        }
                      ]
                    }
                  }
                ]
              }
            },
            {
              "vertical_padding_2": {
                "type": "panel",
                "size": [ 0, 1 ]
              }
            },
            {
              "search_and_filter_panel": {
                "type": "stack_panel",
                "orientation": "horizontal",
                "size": [ "100%", 16 ],
                "layer": 2,
                "controls": [
                  {
                    "text_edit_control@common.text_edit_box": {
                      "size": [ "fill", "100%" ],

                      "property_bag": {
                        "#property_field": "#item_name"
                      },

                      "max_length": 30,
                      "$text_edit_binding_name": "#text_box_item_name",
                      "$text_edit_box_label_size": [ "default", 10 ],
                      "$text_edit_box_hovered_button_id": "button.search_bar_hovered",
                      "$text_edit_box_clear_to_button_id": "button.search_bar_clear",
                      "$text_edit_box_selected_to_button_id": "button.search_bar_selected",
                      "$text_edit_box_deselected_to_button_id": "button.search_bar_deselected",

                      "focus_wrap_enabled": false,

                      "$focus_id": "recipe_search_bar",
                      "$focus_override_right": "craftable_toggle",
                      "$focus_override_up": "FOCUS_OVERRIDE_STOP"
                    }
                  },
                  {
                    "padding_1": {
                      "type": "panel",
                      "size": [ 1, 0 ]
                    }
                  },
                  {
                    "filter_toggle_holder": {
                      "type": "panel",
                      "size": [ "100%c", "100%" ],
                      "controls": [
                        {
                          "filter_toggle@crafting.filter_toggle": {
                            "offset": [ 1, 0 ],
                            "anchor_from": "right_middle",
                            "anchor_to": "right_middle",

                            "$focus_id": "craftable_toggle",
                            "$focus_override_left": "recipe_search_bar",
                            "$focus_override_up": "FOCUS_OVERRIDE_STOP"
                          }
                        }
                      ]
                    }
                  }
                ]
              }
            },
            {
              "vertical_padding_3": {
                "type": "panel",
                "size": [ 0, 2 ]
              }
            },
            {
              "scroll_pane@$scrolling_pane_control": {
                "size": [ "100%", "fill" ]
              }
            }
          ]
        }
      }
    ],
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$navigation_tab_name",
        "source_property_name": "#toggle_state",
        "target_property_name": "#visible"
      }
    ]
  },

  "search_tab_content@crafting.tab_content_search_bar": {
    "$scrolling_pane_control": "crafting.search_scroll_panel",
    "$navigation_tab_name": "search_tab_toggle"
  },

  "construction_tab_content@crafting.tab_content": {
    "$label_text": "craftingScreen.tab.construction",
    "$scrolling_pane_control": "crafting.construction_scroll_panel",
    "$navigation_tab_name": "construction_tab_toggle"
  },

  "equipment_tab_content@crafting.tab_content": {
    "$label_text": "craftingScreen.tab.equipment",
    "$scrolling_pane_control": "crafting.equipment_scroll_panel",
    "$navigation_tab_name": "equipment_tab_toggle"
  },

  "items_tab_content@crafting.tab_content": {
    "$label_text": "craftingScreen.tab.items",
    "$scrolling_pane_control": "crafting.miscellaneous_scroll_panel",
    "$navigation_tab_name": "items_tab_toggle"
  },

  "nature_tab_content@crafting.tab_content": {
    "$label_text": "craftingScreen.tab.nature",
    "$scrolling_pane_control": "crafting.nature_scroll_panel",
    "$navigation_tab_name": "nature_tab_toggle"
  },


  //---------------------------------------------------------------------------
  // Player and armor
  //---------------------------------------------------------------------------

  "armor_overlay": {
    "type": "image",
    "layer": 2,
    "$armor_overlay_size|default": [ 16, 16 ],
    "size": "$armor_overlay_size",
    "bindings": [
      {
        "binding_name": "#empty_armor_image_visible",
        "binding_name_override": "#visible",
        "binding_type": "collection",
        "binding_collection_name": "$item_collection_name"
      }
    ]
  },

  "offhand_overlay": {
    "type": "image",
    "layer": 2,
    "$offhand_overlay_size|default": [ 16, 16 ],
    "size": "$offhand_overlay_size",
    "bindings": [
      {
        "binding_name": "#empty_offhand_image_visible",
        "binding_name_override": "#visible",
        "binding_type": "collection",
        "binding_collection_name": "$item_collection_name"
      }
    ]
  },

  "armor_overlay_helmet@armor_overlay": {
    "texture": "textures/ui/empty_armor_slot_helmet"
  },

  "armor_overlay_chest@armor_overlay": {
    "texture": "textures/ui/empty_armor_slot_chestplate"
  },

  "armor_overlay_legs@armor_overlay": {
    "texture": "textures/ui/empty_armor_slot_leggings"
  },

  "armor_image_feet@armor_overlay": {
    "texture": "textures/ui/empty_armor_slot_boots"
  },

  "armor_overlay_shield@offhand_overlay": {
    "texture": "textures/ui/empty_armor_slot_shield"
  },

  "player_armor_panel": {
    "type": "panel",
    "size": [ 88, 83 ],
    "anchor_to": "top_left",
    "anchor_from": "top_left",
    "controls": [
      {
        "player_bg": {
          "type": "image",
          "texture": "textures/ui/Black",
          "size": [ 52, 70 ],
          "layer": 2,
          "anchor_from": "top_left",
          "anchor_to": "top_left",
          "offset": [ 26, 8 ],
          "controls": [
            {
              "player_renderer": {
                "type": "custom",
                "renderer": "live_player_renderer",
                "property_bag": {
                  "#look_at_cursor": true
                },
                "size": [ 30, 30 ],
                "layer": 1,
                "anchor_from": "center",
                "anchor_to": "center",
                "offset": [ 15, 0 ]
              }
            }
          ]
        }
      },
      {
        "player_preview_border": {
          "type": "image",
          "texture": "textures/ui/player_preview_border",
          "size": [ 54, 72 ],
          "layer": 1,
          "anchor_from": "top_left",
          "anchor_to": "top_left",
          "offset": [ 25, 7 ]
        }
      },
      {
        "armor_grid": {
          "type": "grid",
          "layer": 1,
          "size": [ 18, 72 ],
          "anchor_from": "top_left",
          "anchor_to": "top_left",
          "offset": [ 7, 7 ],
          "grid_dimensions": [ 1, 4 ],
          "$item_collection_name": "armor_items",
          "collection_name": "$item_collection_name",
          "controls": [
            {
              "head_grid_item@common.container_item": {
                "grid_position": [ 0, 0 ],
                "$cell_overlay_ref": "crafting.armor_overlay_helmet",
                "$button_ref": "crafting.no_coalesce_container_slot_button",
                "$slot_selected_binding_name": "#slot_selected_touch",

                "$focus_id_binding_type": "none",
                "$focus_id": "armor_item_head",

                "$focus_override_right_binding_type": "none",
                "$focus_override_right": "crafting_input_top_left"
              }
            },
            {
              "chest_grid_item@common.container_item": {
                "grid_position": [ 0, 1 ],
                "$cell_overlay_ref": "crafting.armor_overlay_chest",
                "$button_ref": "crafting.no_coalesce_container_slot_button",
                "$slot_selected_binding_name": "#slot_selected_touch",

                "$focus_id_binding_type": "none",
                "$focus_id": "armor_item_chest",

                "$focus_override_right_binding_type": "none",
                "$focus_override_right": "crafting_input_top_left"
              }
            },
            {
              "legs_grid_item@common.container_item": {
                "grid_position": [ 0, 2 ],
                "$cell_overlay_ref": "crafting.armor_overlay_legs",
                "$button_ref": "crafting.no_coalesce_container_slot_button",
                "$slot_selected_binding_name": "#slot_selected_touch",

                "$focus_id_binding_type": "none",
                "$focus_id": "armor_item_legs",

                "$focus_override_right_binding_type": "none",
                "$focus_override_right": "crafting_input_mid_left"
              }
            },
            {
              "feet_grid_item@common.container_item": {
                "grid_position": [ 0, 3 ],
                "$cell_overlay_ref": "crafting.armor_image_feet",
                "$button_ref": "crafting.no_coalesce_container_slot_button",
                "$slot_selected_binding_name": "#slot_selected_touch",

                "$focus_id_binding_type": "none",
                "$focus_id": "armor_item_feet",

                "$focus_override_right_binding_type": "none",
                "$focus_override_right": "offhand_items0"
              }
            }
          ]
        }
      },
      {
        "offhand_grid": {
          "type": "grid",
          "layer": 1,
          "size": [ 18, 18 ],
          "anchor_from": "top_left",
          "anchor_to": "top_left",
          "offset": [ 79, 61 ],
          "grid_dimensions": [ 1, 1 ],
          "$item_collection_name": "offhand_items",
          "collection_name": "$item_collection_name",
          "controls": [
            {
              "offhand_grid_item@common.container_item": {
                "grid_position": [ 0, 0 ],
                "$cell_overlay_ref": "crafting.armor_overlay_shield",
                "$button_ref": "crafting.no_coalesce_container_slot_button",
                "$slot_selected_binding_name": "#slot_selected_touch",

                "$focus_override_left_binding_type": "none",
                "$focus_override_left": "armor_item_feet"
              }
            }
          ]
        }
      }
    ]
  },

  //---------------------------------------------------------------------------
  // Crafting panels, 2x2 and 3x3
  //---------------------------------------------------------------------------

  "crafting_label": {
    "type": "label",
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "text": "container.crafting",
    "color": "$title_text_color",
    "layer": 2
  },

  "inventory_label": {
    "type": "label",
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "text": "container.inventory",
    "color": "$title_text_color",
    "layer": 2
  },

  "crafting_arrow": {
    "type": "image",
    "layer": 3,
    "texture": "textures/ui/arrow",
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "size": [ 16, 13 ]
  },

  "crafting_arrow_large": {
    "type": "image",
    "layer": 3,
    "texture": "textures/ui/arrow_large",
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "size": [ 22, 15 ]
  },

  "crafting_input_grid_item@crafting.inventory_container_item": {
    "$item_collection_name": "crafting_input_items",
    "$background_images": "crafting.crafting_container_cell_images",
    "$item_renderer_binding_condition": "always",
    "$button_ref": "crafting.inventory_container_slot_button",
    "$slot_selected_binding_name": "#slot_selected_touch"
  },

  "crafting_grid_3x3": {
    "type": "grid",
    "size": [ 54, 54 ],
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "grid_dimensions": [ 3, 3 ],
    "collection_name": "crafting_input_items",

    "controls": [
      {
        "crafting_input_item_top_left@crafting.crafting_input_grid_item": {
          "grid_position": [ 0, 0 ],

          "$focus_id_binding_type": "none",
          "$focus_id": "crafting_input_top_left",

          "$focus_override_left_binding_type": "none",
          "$focus_override_left": "armor_item_head"
        }
      },
      {
        "crafting_input_item_top_mid@crafting.crafting_input_grid_item": {
          "grid_position": [ 1, 0 ]
        }
      },
      {
        "crafting_input_item_top_right@crafting.crafting_input_grid_item": {
          "grid_position": [ 2, 0 ]
        }
      },
      {
        "crafting_input_item_mid_left@crafting.crafting_input_grid_item": {
          "grid_position": [ 0, 1 ],

          "$focus_id_binding_type": "none",
          "$focus_id": "crafting_input_mid_left",

          "$focus_override_left_binding_type": "none",
          "$focus_override_left": "armor_item_legs"
        }
      },
      {
        "crafting_input_item_middle@crafting.crafting_input_grid_item": {
          "grid_position": [ 1, 1 ]
        }
      },
      {
        "crafting_input_item_mid_right@crafting.crafting_input_grid_item": {
          "grid_position": [ 2, 1 ]
        }
      },
      {
        "crafting_input_item_bot_left@crafting.crafting_input_grid_item": {
          "grid_position": [ 0, 2 ]
        }
      },
      {
        "crafting_input_item_bot_mid@crafting.crafting_input_grid_item": {
          "grid_position": [ 1, 2 ]
        }
      },
      {
        "crafting_input_item_bot_right@crafting.crafting_input_grid_item": {
          "grid_position": [ 2, 2 ],

          "$focus_override_right_binding_type": "none",
          "$focus_override_right": "crafting_output_item"
        }
      }
    ]
  },

  "crafting_grid_2x2": {
    "type": "grid",
    "size": [ 36, 36 ],
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "offset": [ 0, 25 ],
    "grid_dimensions": [ 2, 2 ],
    "collection_name": "crafting_input_items",

    "controls": [
      {
        "crafting_input_item_top_left@crafting.crafting_input_grid_item": {
          "grid_position": [ 0, 0 ],

          "$focus_id_binding_type": "none",
          "$focus_id": "crafting_input_top_left",

          "$focus_override_left_binding_type": "none",
          "$focus_override_left": "armor_item_head"
        }
      },
      {
        "crafting_input_item_top_right@crafting.crafting_input_grid_item": {
          "grid_position": [ 1, 0 ],

          "$focus_id_binding_type": "none",
          "$focus_id": "crafting_input_top_right",

          "$focus_override_right_binding_type": "none",
          "$focus_override_right": "crafting_output_item"
        }
      },
      {
        "crafting_input_item_bot_left@crafting.crafting_input_grid_item": {
          "grid_position": [ 0, 1 ],

          "$focus_id_binding_type": "none",
          "$focus_id": "crafting_input_mid_left",

          "$focus_override_left_binding_type": "none",
          "$focus_override_left": "armor_item_legs"
        }
      },
      {
        "crafting_input_item_bot_right@crafting.crafting_input_grid_item": {
          "grid_position": [ 1, 1 ],

          "$focus_override_right_binding_type": "none",
          "$focus_override_right": "crafting_output_item"
        }
      }
    ]
  },

  "output_grid_3x3": {
    "type": "grid",
    "grid_dimensions": [ 1, 1 ],
    "collection_name": "crafting_output_items",
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "size": [ 26, 26 ],
    "controls": [
      {
        "work_bench_output@crafting.inventory_container_item": {
          "$cell_image_size": [ 26, 26 ],
          "$item_collection_name": "crafting_output_items",
          "$button_ref": "crafting.output_no_coalesce_container_slot_button",
          "$stack_count_binding_condition": "always",
          "$item_renderer_binding_condition": "always",
          "$background_images": "crafting.crafting_container_cell_images",

          "$focus_id_binding_type": "none",
          "$focus_id": "crafting_output_item",

          "$focus_override_right_binding_type": "none",
          "$focus_override_right": "FOCUS_OVERRIDE_STOP"

          //"$focus_override_up_binding_type": "none",
          //"$focus_override_up": "FOCUS_OVERRIDE_STOP"
        }
      }
    ]
  },

	"output_grid_2x2": {
		"type": "grid",
		"grid_dimensions": [1, 1],
		"collection_name": "crafting_output_items",
		"anchor_from": "top_left",
		"anchor_to": "top_left",
		"size": [18, 18],
		"controls": [{
				"work_bench_output@crafting.inventory_container_item": {
					"$item_collection_name": "crafting_output_items",
					"$button_ref": "crafting.output_no_coalesce_container_slot_button",
					"$background_images": "crafting.crafting_container_cell_images",
					"$item_renderer_binding_condition": "always",
					"$stack_count_binding_condition": "always",

					"$focus_id_binding_type": "none",
					"$focus_id": "crafting_output_item",
					"$focus_override_left_binding_type": "none",
					"$focus_override_left": "crafting_input_top_right",
					"$focus_override_up_binding_type": "none",
					"$focus_override_up": "help_button"
				}
			}
		]
	},

	"work_bench_panel_3x3": {
		"type": "panel",
		"anchor_to": "top_left",
		"anchor_from": "top_left",
		"controls": [{
				"crafting_label_0@crafting_label": {
					"offset": [-1, 6]
				}
			}, {
				"recipe_book_toggle@common_toggles.dark_image_toggle": {
					"size": [22, 22],
					"offset": [-101, 1],
					"$toggle_focus_wrap_enabled": false,

					"$border_visible": false,

					"$default_texture": "textures/ui/recipe_book",
					"$hover_texture": "textures/ui/recipe_book",
					"$pressed_texture": "textures/ui/recipe_book_hover",
					"$pressed_no_hover_texture": "textures/ui/recipe_book_hover",
					"$toggle_name": "toggle.enableRecipeBook",
					"$toggle_state_binding_name": "#recipe_book_toggle",
					"$toggle_binding_type": "global"
				}
			}, {
				"crafting_arrow_large@crafting_arrow_large": {
					"offset": [61, 35]
				}
			}, {
				"crafting_grid_3x3@crafting_grid_3x3": {
					"offset": [0, 16]
				}
			}, {
				"work_bench_output_grid@crafting.output_grid_3x3": {
					"offset": [94, 34]
				}
			}
		]
	},

  "crafting_grid_3x3_with_label": {
    "type": "panel",
    "size": [ 54, 65 ],
    "anchor_from": "top_middle",
    "anchor_to": "top_middle",
    "$grid_label_alignment|default": "left",
    "controls": [
      {
        "crafting_label@crafting.crafting_label": {
          "size": [ "100%", 10 ],
          "text_alignment": "$grid_label_alignment"
        }
      },
      {
        "crafting_grid_3x3@crafting.crafting_grid_3x3": {
          "offset": [ 0, 11 ]
        }
      }
    ]
  },

  "crafting_grid_2x2_with_label": {
    "type": "panel",
    "size": [ 36, 47 ],
    "anchor_from": "top_middle",
    "anchor_to": "top_middle",
    "controls": [
      {
        "crafting_label@crafting.crafting_label": {
          "size": [ "default", 10 ]
        }
      },
      {
        "crafting_grid_2x2@crafting.crafting_grid_2x2": {
          "offset": [ 0, 11 ]
        }
      }
    ]
  },

	"crafting_panel_2x2": {
		"type": "panel",
		"size": [88, 83],
		"anchor_from": "top_middle",
		"anchor_to": "top_left",
		"controls": [{
				"crafting_arrow@crafting_arrow": {
					"offset": [46, 29],
					"bindings": [{
							"binding_type": "view",
							"source_control_name": "crafting_panel",
							"resolve_sibling_scope": true,
							"source_property_name": "(not #needs_crafting_table)",
							"target_property_name": "#visible"
						}
					]
				}
			}, {
				"recipe_book_toggle@common_toggles.dark_image_toggle": {
					"size": [22, 22],
					"offset": [-18, 28],
					"$toggle_focus_wrap_enabled": false,
					"$border_visible": false,

					"$default_texture": "textures/ui/recipe_book",
					"$hover_texture": "textures/ui/recipe_book",
					"$pressed_texture": "textures/ui/recipe_book_hover",
					"$pressed_no_hover_texture": "textures/ui/recipe_book_hover",
					"$toggle_name": "toggle.enableRecipeBook",
					"$toggle_state_binding_name": "#recipe_book_toggle",
					"$toggle_binding_type": "global"
				}
			}, {
				"crafting_table@crafting.item_renderer": {
					"offset": [10, -5],
					"property_bag": {
						"#item_id_aux": 3801088
					},
					"bindings": [{
							"binding_type": "view",
							"source_control_name": "crafting_panel",
							"resolve_sibling_scope": true,
							"source_property_name": "(#needs_crafting_table)",
							"target_property_name": "#visible"
						}
					]
				}
			}, {
				"crafting_grid_2x2@crafting_grid_2x2": {
					"offset": [8, 17]
				}
			}, {
				"survival_crafting_output_grid@crafting.output_grid_2x2": {
					"offset": [64, 26]
				}
			}
		],
		"bindings": [{
				"binding_name": "#needs_crafting_table",
				"binding_condition": "visible"
			}
		]
	},

  //---------------------------------------------------------------------------
  // Help button
  //---------------------------------------------------------------------------

  "help_button@common.button": {
    "size": [ 15, 15 ],
    "layer": 5,

    "$pressed_button_name": "button.help",

    "$focus_id": "help_button",
    "$focus_override_right": "FOCUS_OVERRIDE_STOP",
    "$focus_override_up": "FOCUS_OVERRIDE_STOP",

    "controls": [
      {
        "default": {
          "type": "image",
          "texture": "textures/ui/how_to_play_button_default"
        }
      },
      {
        "hover": {
          "type": "image",
          "texture": "textures/ui/how_to_play_button_hovered"
        }
      },
      {
        "pressed": {
          "type": "image",
          "texture": "textures/ui/how_to_play_button_pressed"
        }
      }
    ]
  },

  //---------------------------------------------------------------------------
  // Base Panels
  //---------------------------------------------------------------------------

  // Top half of ui, elements specific to survival inventory
  // - player with armor on left
  // - small crafting panel (2x2) on right
  "survival_panel_top_half": {
    "type": "panel",
    "size": [ "100%", "50%" ],
    "anchor_to": "top_left",
    "anchor_from": "top_left",
    "controls": [
      { "player_armor_panel@player_armor_panel": {} },
      { "crafting_panel@crafting_panel_2x2": {} }
    ]
  },

  // Top half of ui, elements specific to crafting screen
  // - large crafting panel 3x3 on top half
  "crafting_panel_top_half": {
    "type": "panel",
    "size": [ "100%", "50%" ],
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "controls": [
      {
        "crafting_panel@work_bench_panel_3x3": {
          "offset": [ 29, 0 ]
        }
      }
    ]
  },

  //---------------------------------------------------------------------------
  // Screens, survival inventory and crafting
  //---------------------------------------------------------------------------

  "recipe_container_cell_images": {
    "type": "image",
    "$cell_images_binding_condition|default": "visible",
    "size": "$cell_image_size",
    "$cell_image_size|default": [ "default", "default" ],

    "bindings": [
      {
        "binding_name": "#container_item_background_texture",
        "binding_name_override": "#texture",
        "binding_type": "collection",
        "binding_collection_name": "$item_collection_name",
        "binding_condition": "$cell_images_binding_condition"
      }
    ]
  },

  "cell_image_recipe_default@crafting.cell_image": {
    "texture": "textures/ui/recipe_book_item_bg",
    "$cell_image_size|default": [ "default", "default" ],
    "size": "$cell_image_size",
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$background_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_background = 0)",
        "target_property_name": "#visible"
      }
    ]
  },

  "cell_image_recipe_group_head_collapsed@crafting.cell_image": {
    "texture": "textures/ui/recipe_book_light_button",
    "$cell_image_size|default": [ "default", "default" ],
    "size": "$cell_image_size",
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$background_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_background = 1)",
        "target_property_name": "#visible"
      }
    ]
  },

  "cell_image_recipe_group_head_expanded@crafting.cell_image": {
    "texture": "textures/ui/recipe_book_dark_button_pressed",
    "$cell_image_size|default": [ "default", "default" ],
    "size": "$cell_image_size",
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$background_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_background = 2)",
        "target_property_name": "#visible"
      }
    ]
  },

  "cell_image_recipe_group_item@crafting.cell_image": {
    "texture": "textures/ui/recipe_book_dark_button",
    "$cell_image_size|default": [ "default", "default" ],
    "size": "$cell_image_size",
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$background_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_background = 3)",
        "target_property_name": "#visible"
      }
    ]
  },

  "cell_image_recipe_selected@crafting.cell_image": {
    "texture": "textures/ui/recipe_book_touch_cell_selected",
    "$cell_image_size|default": [ "default", "default" ],
    "size": "$cell_image_size",
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$background_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_background = 4)",
        "target_property_name": "#visible"
      }
    ]
  },

  "cell_image_recipe_default_red@crafting.cell_image": {
    "texture": "textures/ui/recipe_book_red_button",
    "$cell_image_size|default": [ "default", "default" ],
    "size": "$cell_image_size",
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$background_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_background = 5)",
        "target_property_name": "#visible"
      }
    ]
  },

  "container_cell_images": {
    "type": "panel",
    "$cell_images_binding_condition|default": "visible",
    "controls": [
      { "cell_classic@crafting.cell_image_classic": {} },
      { "cell_normal@crafting.cell_image_normal": {} },
      { "cell_invert@crafting.cell_image_invert": {} },
      { "cell_red@crafting.cell_image_red": {} },
      { "cell_selected@crafting.cell_image_selected": {} }
    ],
    "bindings": [
      {
        "binding_name": "#container_item_background",
        "binding_type": "collection",
        "binding_collection_name": "$item_collection_name",
        "binding_condition": "$cell_images_binding_condition"
      }
    ]
  },

  "crafting_container_cell_images@crafting.container_cell_images": {
    "$cell_images_binding_condition": "always"
  },

  "cell_image": {
    "type": "image",
    "texture": "textures/ui/cell_image"
  },

  "cell_image_classic@crafting.cell_image": {
    "texture": "textures/ui/cell_image",
    "$cell_image_size|default": [ "default", "default" ],
    "size": "$cell_image_size",
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$background_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_background = 0)",
        "target_property_name": "#visible"
      }
    ]
  },

  "cell_image_normal@crafting.cell_image": {
    "texture": "textures/ui/cell_image_normal",
    "$cell_image_size|default": [ "default", "default" ],
    "size": "$cell_image_size",
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$background_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_background = 1)",
        "target_property_name": "#visible"
      }
    ]
  },

  "cell_image_invert@crafting.cell_image": {
    "texture": "textures/ui/cell_image_invert",
    "$cell_image_size|default": [ "default", "default" ],
    "size": "$cell_image_size",
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$background_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_background = 2)",
        "target_property_name": "#visible"
      }
    ]
  },

  "cell_image_red@crafting.cell_image": {
    "texture": "textures/ui/cell_image_red",
    "$cell_image_size|default": [ "default", "default" ],
    "size": "$cell_image_size",
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$background_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_background = 3)",
        "target_property_name": "#visible"
      }
    ]
  },

  "cell_image_selected@common.cell_image": {
    "texture": "textures/ui/recipe_book_touch_cell_selected",
    "$cell_image_size|default": [ "default", "default" ],
    "size": "$cell_image_size",
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$background_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_background = 4)",
        "target_property_name": "#visible"
      }
    ]
  },

  "container_overlay_images": {
    "type": "panel",
    "controls": [
      { "expand@crafting.item_overlay_expand": {} },
      { "contract@crafting.item_overlay_contract": {} }
    ],
    "bindings": [
      {
        "binding_name": "#container_item_modifier",
        "binding_type": "collection",
        "binding_collection_name": "$item_collection_name",
        "binding_condition": "visible"
      }
    ]
  },

  "item_overlay_image": {
    "type": "image",
    "size": [ 7, 7 ],
    "offset": [ -1, -1 ],
    "anchor_from": "bottom_right",
    "anchor_to": "bottom_right"
  },

  "item_overlay_contract@crafting.item_overlay_image": {
    "texture": "textures/ui/recipe_book_collapse_icon",
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$overlay_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_modifier = 1)",
        "target_property_name": "#visible"
      }
    ]
  },

  "item_overlay_expand@crafting.item_overlay_image": {
    "texture": "textures/ui/recipe_book_expand_icon",
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$overlay_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_modifier = 2)",
        "target_property_name": "#visible"
      }
    ]
  },

  "inventory_container_item": {
    "type": "panel",
    "size": [ 18, 18 ],
    "layer": 1,
    "anchor_to": "top_left",
    "anchor_from": "top_left",
    "$cell_image_size|default": [ 18, 18 ],
    "$cell_overlay_ref|default": "common.cell_overlay",
    "$button_ref|default": "crafting.inventory_container_slot_button",
    "$stack_count_required|default": true,
    "$durability_bar_required|default": true,
    "$item_renderer|default": "common.item_renderer",
    "$item_renderer_panel_size|default": [ 18, 18 ],
    "$item_renderer_size|default": [ 16, 16 ],
    "$item_renderer_offset|default": [ 0, 0 ],
    "$background_images|default": "crafting.container_cell_images",
    "$background_image_control_name|default": "bg",
    "$overlay_images|default": "crafting.container_overlay_images",
    "$overlay_image_control_name|default": "overlay",
    "$slot_selected_binding_name": "#slot_selected_touch",
    "controls": [
      {
        "item_cell": {
          "type": "panel",
          "size": "$cell_image_size",
          "controls": [
            {
              "$background_image_control_name@$background_images": {}
            },
            {
              "item": {
                "type": "panel",
                "size": "$item_renderer_panel_size",
                "controls": [
                  {
                    "stack_count_label@common.stack_count_label": {
                      "layer": 4
                    }
                  },
                  {
                    "$item_renderer@$item_renderer": {
                      "size": "$item_renderer_size",
                      "offset": "$item_renderer_offset",
                      "anchor_to": "center",
                      "anchor_from": "center",
                      "layer": 2
                    }
                  }
                ]
              }
            },
            {
              "durability_bar@common.durability_bar": {
                "layer": 5
              }
            },
            {
              "$overlay_image_control_name@$overlay_images": {
                "layer": 6
              }
            }
          ]
        }
      },
      { "item_cell_overlay_ref@$cell_overlay_ref": {} },
      { "item_selected_image@common.slot_selected": {} },
      { "item_button_ref@$button_ref": {} }
    ]
  },

  "creative_container_item@crafting.inventory_container_item": {
    "$stack_count_required": false,
    "$durability_bar_required": false,
    "$item_renderer_binding_condition": "visible",
    "$button_ref": "crafting.creative_no_coalesce_container_slot_button",
    "$background_images": "crafting.recipe_container_cell_images"
  },

  "grid_item_for_recipe_construction@crafting.creative_container_item": {
    "$stack_count_required": true,
    "$stack_count_binding_name": "#recipe_craftable_count",
    "$item_collection_name": "recipe_construction",
    "$scrolling_grid_item_size|default": [ 18, 18 ],
    "$hover_text_binding_name": "#recipe_hover_text",
    "size": "$scrolling_grid_item_size"
  },

  "grid_item_for_recipe_nature@crafting.creative_container_item": {
    "$stack_count_required": true,
    "$stack_count_binding_name": "#recipe_craftable_count",
    "$item_collection_name": "recipe_nature",
    "$scrolling_grid_item_size|default": [ 18, 18 ],
    "$hover_text_binding_name": "#recipe_hover_text",
    "size": "$scrolling_grid_item_size"
  },

  "grid_item_for_recipe_equipment@crafting.creative_container_item": {
    "$stack_count_required": true,
    "$stack_count_binding_name": "#recipe_craftable_count",
    "$item_collection_name": "recipe_equipment",
    "$scrolling_grid_item_size|default": [ 18, 18 ],
    "$hover_text_binding_name": "#recipe_hover_text",
    "size": "$scrolling_grid_item_size"
  },

  "grid_item_for_recipe_items@crafting.creative_container_item": {
    "$stack_count_required": true,
    "$stack_count_binding_name": "#recipe_craftable_count",
    "$item_collection_name": "recipe_items",
    "$scrolling_grid_item_size|default": [ 18, 18 ],
    "$hover_text_binding_name": "#recipe_hover_text",
    "size": "$scrolling_grid_item_size"
  },

  "grid_item_for_recipe_search@crafting.creative_container_item": {
    "$stack_count_required": true,
    "$stack_count_binding_name": "#recipe_craftable_count",
    "$item_collection_name": "recipe_search",
    "$scrolling_grid_item_size|default": [ 18, 18 ],
    "size": "$scrolling_grid_item_size"
  },



  //----------------------------------
  //----------------------------------

  "scroll_grid_panel": {
    "type": "panel",
    "size": [ "100%", "100%c + 2px" ],
    "controls": [
      { "grid@crafting.scroll_grid": {} }
    ]
  },

  "scroll_grid": {
    "type": "grid",
    "size": [ "100%", "default" ],
    "layer": 1,
    "anchor_to": "top_left",
    "anchor_from": "top_left",
    "collection_name": "$collection_name",
    "$binding_condition|default": "visible",
    "$grid_rescaling_type|default": "horizontal",
    "$grid_item_template|default": "crafting.grid_item_for_recipe_items",
    "grid_rescaling_type": "$grid_rescaling_type",
    "grid_item_template": "$grid_item_template",
    "$grid_item_precache_count|default": 0,
    "precached_grid_item_count": "$grid_item_precache_count",
    "bindings": [
      {
        "binding_name": "#collection_total_items",
        "binding_name_override": "#maximum_grid_items",
        "binding_condition": "$binding_condition",
        "binding_type": "collection",
        "binding_collection_name": "$collection_name"
      }
    ]
  },

  "construction_inventory_grid@crafting.scroll_grid_panel": {
    "$grid_rescaling_type": "horizontal",
    "$grid_item_template": "crafting.grid_item_for_recipe_construction",
    "$collection_name": "recipe_construction",
    "$grid_item_precache_count": "$construction_precache_count"
  },

  "nature_inventory_grid@crafting.scroll_grid_panel": {
    "$grid_rescaling_type": "horizontal",
    "$grid_item_template": "crafting.grid_item_for_recipe_nature",
    "$collection_name": "recipe_nature",
    "$grid_item_precache_count": "$nature_precache_count"
  },

  "equipment_inventory_grid@crafting.scroll_grid_panel": {
    "$grid_rescaling_type": "horizontal",
    "$grid_item_template": "crafting.grid_item_for_recipe_equipment",
    "$collection_name": "recipe_equipment",
    "$grid_item_precache_count": "$equipment_precache_count"
  },

  "miscellaneous_inventory_grid@crafting.scroll_grid_panel": {
    "$grid_rescaling_type": "horizontal",
    "$grid_item_template": "crafting.grid_item_for_recipe_items",
    "$collection_name": "recipe_items",
    "$grid_item_precache_count": "$items_precache_count"
  },

  "search_inventory_grid@crafting.scroll_grid_panel": {
    "$grid_rescaling_type": "horizontal",
    "$grid_item_template": "crafting.grid_item_for_recipe_search",
    "$collection_name": "recipe_search",
    "$grid_item_precache_count": "$search_precache_count"
  },

  "scroll_box_image": {
    "type": "image",
    "texture": "textures/ui/ScrollBox"
  },

  "scroll_bar_side_rails": {
    "type": "image",
    "layer": 1,
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "texture": "textures/ui/ScrollGutterWithBG"
  },

  "scrollbar_track": {
    "type": "panel",
    "layer": 1,
    "anchor_to": "top_right",
    "anchor_from": "top_right",
    "controls": [
      {
        "rails@crafting.scroll_bar_side_rails": {
          "allow_clipping": false
        }
      }
    ]
  },

  "scroll_background_image": {
    "type": "image",
    "layer": 2,
    "texture": "textures/ui/recipe_book_pane_bg"
  },

  "creative_inventory_scroll_panel@common.scrolling_panel_with_offset": {
    "$scrolling_pane_offset": [ 0, 0 ],
    "$scroll_view_port_offset": [ 4, 1 ],
    "$scroll_view_port_offset_touch": [ 2, 1 ],
    "$scrolling_pane_size": [ "100%", "100%" ],
    "$scroll_view_port_size": [ "100% - 8px", "100% - 2px" ],
    "$scroll_view_port_size_touch": [ "100% - 8px", "100% - 2px" ],
    "$scroll_bar_right_padding_size": [ 0, 0 ],
    "$scroll_background_image_control": "crafting.scroll_background_image",
    "$scroll_track_image_control": "crafting.scrollbar_track",
    "$scroll_box_mouse_image_control": "crafting.scroll_box_image",
    "$scroll_box_touch_image_control": "common.new_touch_scrollbar_box_image",
    "$scrolling_panel_base_button_mappings": [
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "button.attempt_discard_all",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_secondary_select",
        "to_button_id": "button.attempt_discard_one",
        "mapping_type": "pressed"
      }
    ]
  },

  "survival_inventory_scroll_panel@common.scrolling_panel_with_offset": {
    "$scrolling_pane_offset": [ 0, 0 ],
    "$scroll_view_port_offset": [ 4, 1 ],
    "$scroll_view_port_offset_touch": [ 2, 1 ],
    "$scrolling_pane_size": [ "100%", "100%" ],
    "$scroll_view_port_size": [ "100% - 8px", "100% - 2px" ],
    "$scroll_view_port_size_touch": [ "100% - 8px", "100% - 2px" ],
    "$scroll_bar_right_padding_size": [ 0, 0 ],
    "$scroll_background_image_control": "crafting.scroll_background_image",
    "$scroll_track_image_control": "crafting.scrollbar_track",
    "$scroll_box_mouse_image_control": "crafting.scroll_box_image",
    "$scroll_box_touch_image_control": "common.new_touch_scrollbar_box_image",
    "$scrolling_panel_base_button_mappings": [
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "button.menu_select",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_secondary_select",
        "to_button_id": "button.menu_secondary_select",
        "mapping_type": "pressed"
      }
    ]
  },

  "construction_scroll_panel@crafting.creative_inventory_scroll_panel": {
    "$scrolling_content": "crafting.construction_inventory_grid"
  },

  "nature_scroll_panel@crafting.creative_inventory_scroll_panel": {
    "$scrolling_content": "crafting.nature_inventory_grid"
  },

  "equipment_scroll_panel@crafting.creative_inventory_scroll_panel": {
    "$scrolling_content": "crafting.equipment_inventory_grid"
  },

  "miscellaneous_scroll_panel@crafting.creative_inventory_scroll_panel": {
    "$scrolling_content": "crafting.miscellaneous_inventory_grid"
  },

  "search_scroll_panel@crafting.creative_inventory_scroll_panel": {
    "$scrolling_content": "crafting.search_inventory_grid"
  },

  "creative_label": {
    "size": [ "100%", 10 ],
    "anchor_from": "center",
    "anchor_to": "center",
    "type": "label",
    "text_alignment": "right",
    "text": "$label_text",
    "color": "$title_text_color",
    "layer": 2
  },

  "filter_toggle@common_toggles.switch_toggle": {
    "size": [ 29, 17 ],
    "$default_texture": "textures/ui/craft_toggle_off",
    "$hover_texture": "textures/ui/craft_toggle_on",
    "$pressed_texture": "textures/ui/craft_toggle_off_hover",
    "$pressed_no_hover_texture": "textures/ui/craft_toggle_on_hover",
    "$unchecked_locked_texture": "textures/ui/craft_toggle_off",
    "$checked_locked_texture": "textures/ui/craft_toggle_on",

    "$toggle_name": "toggle.enableFiltering",
    "$toggle_binding_type": "global",
    "$toggle_state_binding_name": "#filtering_enabled",

    "$button_mappings": [
      {
        "to_button_id": "button.filter_toggle_hovered",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "button.menu_select",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_ok",
        "to_button_id": "button.menu_ok",
        "mapping_type": "focused"
      },
      {
        "ignored": "(not $enable_directional_toggling)",
        "from_button_id": "button.menu_left",
        "to_button_id": "$toggle_off_button",
        "mapping_type": "pressed",
        "input_mode_condition": "gamepad_and_not_gaze"
      },
      {
        "ignored": "(not $enable_directional_toggling)",
        "from_button_id": "button.menu_right",
        "to_button_id": "$toggle_on_button",
        "mapping_type": "pressed",
        "input_mode_condition": "gamepad_and_not_gaze"
      }
    ],
    "bindings": [
      {
        "binding_name": "(not #is_creative_mode)",
        "binding_name_override": "#visible"
      }
    ]
  },

  //---------------------------
  //---------------------------

  "inventory_screen_base@common.inventory_screen_common": {
    "button_mappings": [
      {
        "from_button_id": "button.menu_cancel",
        "to_button_id": "button.menu_exit",
        "mapping_type": "global"
      },
      {
        "from_button_id": "button.menu_inventory_cancel",
        "to_button_id": "button.menu_exit",
        "mapping_type": "global"
      },
      {
        "from_button_id": "button.menu_up",
        "to_button_id": "button.menu_up",
        "mapping_type": "global",
        "scope": "view"
      },
      {
        "from_button_id": "button.menu_down",
        "to_button_id": "button.menu_down",
        "mapping_type": "global",
        "scope": "view"
      },
      {
        "from_button_id": "button.menu_left",
        "to_button_id": "button.menu_left",
        "mapping_type": "global",
        "scope": "view"
      },
      {
        "from_button_id": "button.menu_right",
        "to_button_id": "button.menu_right",
        "mapping_type": "global",
        "scope": "view"
      },
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "button.cursor_drop_all",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_secondary_select",
        "to_button_id": "button.cursor_drop_one",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_clear",
        "to_button_id": "button.menu_clear",
        "mapping_type": "focused"
      },
      {
        "from_button_id": "button.menu_tab_left",
        "to_button_id": "button.left_panel_tab_decrement",
        "mapping_type": "global"
      },
      {
        "from_button_id": "button.menu_tab_right",
        "to_button_id": "button.left_panel_tab_increment",
        "mapping_type": "global"
      },
      {
        "from_button_id": "button.controller_secondary_select_left",
        "to_button_id": "button.shift_pane_focus",
        "mapping_type": "global"
      },
      {
        "from_button_id": "button.chat",
        "to_button_id": "button.chat",
        "mapping_type": "global"
      }
    ]
  },

  "crafting_screen@crafting.inventory_screen_base": {
    "send_telemetry": false,
    "$screen_content": "crafting.recipe_inventory_screen_content",
    "$screen_bg_content": "common.screen_background",
    "$top_half_variant": "crafting.crafting_panel_top_half"
  },

  "inventory_screen@crafting.inventory_screen_base": {
    "send_telemetry": false,
    "$screen_content": "crafting.recipe_inventory_screen_content",
    "$screen_bg_content": "common.screen_background",
    "$top_half_variant": "crafting.survival_panel_top_half"
  },

  "recipe_book_toggle_image": {
    "type": "image",
    "layer": 2,
    "size": [ 5, 9 ],

    "anchor_from": "left_middle",
    "anchor_to": "left_middle",

    "$toggle_checked|default": false,
    "$toggle_unchecked|default": false,
    "$toggle_checked_hover|default": false,
    "$toggle_unchecked_hover|default": false,
    "$toggle_texture|default": "textures/ui/expand_dots_out",
    "$image_offset|default": [2, 0],

    "variables": [
      {
        "requires": "($toggle_checked)",
        "$toggle_texture": "textures/ui/recipe_book_expand_dots_in"
      },
      {
        "requires": "($toggle_checked_hover)",
        "$toggle_texture": "textures/ui/recipe_book_expand_dots_in_hover"
      },
      {
        "requires": "($toggle_unchecked)",
        "$toggle_texture": "textures/ui/recipe_book_expand_dots_out",
        "$image_offset|default": [1, 0]
      },
      {
        "requires": "($toggle_unchecked_hover)",
        "$toggle_texture": "textures/ui/recipe_book_expand_dots_out_hover",
        "$image_offset|default": [1, 0]
      }
    ],

    "offset": "$image_offset",

    "texture": "$toggle_texture"
  },

  "recipe_inventory_screen_content": {
    "type": "panel",
    "controls": [
      {
        "controller_gamepad_helpers_stack_panel": {
          "type": "stack_panel",
          "anchor_from": "bottom_middle",
          "anchor_to": "bottom_middle",
          "controls": [
            { "container_gamepad_helpers_second_row@crafting.container_gamepad_helpers_second_row": {} },
            {
              "container_gamepad_helpers@common.container_gamepad_helpers": {
                "$helper_x_control": "crafting.inventory_x_gamepad_helper"
              }
            }
          ]
        }
      },
      {
        "flying_item_renderer@common.flying_item_renderer": {
          "layer": 12
        }
      },
      {
        "layout_panel": {
          "type": "stack_panel",
          "size": ["default", 166],
          "orientation": "horizontal",
          "controls": [
            {
              "recipe_book": {
                "type": "panel",
                "size": [ 134, 166 ],
                "layer": 5,
                "bindings": [
                  {
                    "binding_type": "global",
                    "binding_name": "#recipe_book_toggle",
                    "binding_name_override": "#visible"
                  }
                ],
                "controls": [
                  { "tab_navigation_panel@crafting.tab_navigation_panel_layout": {} },
                  {
                    "creative_gamepad_helpers@crafting.creative_gamepad_helpers": {
                      "offset": [ 0, -5 ]
                    }
                  },
                  {
                    "tab_content_panel": {
                      "type": "input_panel",
                      "anchor_to": "bottom_middle",
                      "anchor_from": "bottom_middle",
                      "size": [ "100%", "100%" ],
                      "offset": [ 0, 12 ],
                      "controls": [
                        { "search_tab_content@crafting.search_tab_content": {} },
                        { "construction_tab_content@crafting.construction_tab_content": {} },
                        { "equipment_tab_content@crafting.equipment_tab_content": {} },
                        { "items_tab_content@crafting.items_tab_content": {} },
                        { "nature_tab_content@crafting.nature_tab_content": {} }
                      ]
                    }
                  }
                ]
              }
            },
            {
              "center_fold": {
                "type": "panel",
                "size": [ 5, 166 ],
                "anchor_from": "right_middle",
                "anchor_to": "left_middle",
                "bindings": [
                  {
                    "binding_type": "global",
                    "binding_name": "#recipe_book_toggle",
                    "binding_name_override": "#visible"
                  }
                ],
                "controls": [
                  {
                    "center_bg": {
                      "type": "image",
                      "texture": "textures/ui/recipe_back_panel",
                      "size": [ 0, 0 ],
                      "offset": [ 0, 6 ],
                      "anchor_from": "right_middle",
                      "anchor_to": "left_middle"
                    }
                  }
                ]
              }
            },
            {
              "player_inventory@common.root_panel": {
                "layer": 5,
                "controls": [
                  {
                    "common_panel@common.common_panel": {
                      "offset": [ 0, 0 ]
                    }
                  },
                  {
                    "corner_buttons_holder": {
                      "type": "stack_panel",
                      "size": [ "100%c", "100%cm" ],
                      "anchor_from": "top_right",
                      "anchor_to": "top_right",
                      "offset": [ -3, 3 ],
                      "orientation": "horizontal",
                      
                      "controls": [
                        { "help_button@crafting.help_button": {} },
                        {
                          "close_button@common.close_button": {
                            "size": [ 15, 15 ],
                            "bindings": [
                              {
                                "binding_name": "#close_button_visible",
                                "binding_name_override": "#visible"
                              }
                            ]
                          }
                        }
                      ]
                    }
                  },
                  { "inventory_selected_icon_button@common.inventory_selected_icon_button": {} },
                  { "hold_icon@common.inventory_take_progress_icon_button": {} },
                  {
                    "right_panel": {
                      "visible": true,
                      "type": "panel",
                      "offset": [ 0, 0 ],
                      "layer": 4,
                      "controls": [
                        { "inventory_panel_top_half@$top_half_variant": {} },
                        {
                          "inventory_panel_bottom_half@common.inventory_panel_bottom_half": {
                            "$button_ref": "crafting.inventory_container_slot_button",
                            "$slot_selected_binding_name": "#slot_selected_touch"
                          }
                        },
                        { "inventory_take_progress_icon_button@common.inventory_take_progress_icon_button": {} },
                        {
                          "hotbar_grid@common.hotbar_grid_template": {
                            "$button_ref": "crafting.hotbar_container_slot_button",
                            "$slot_selected_binding_name": "#slot_selected_touch"
                          }
                        }
                      ]
                    }
                  }
                ]
              }
            }
          ]
        }
      }
    ]
  }
}